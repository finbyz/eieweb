{% extends "templates/web.html" %}

{% block page_content %}
{% set gallery_list = frappe.get_list("Gallery", {} ,['image']) %}
{% set doc = frappe.get_list("Gallery", {} ,['category_name']) %}

<section class="pt-50">

    <!-- <div class="container-fluid"> -->
    <div class="row pt-50">
        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12">
            <h2 class="dark-text title-underline">Gallery</h2>
        </div>
    </div>
    {% set cat_list = frappe.get_list("Category Name", {} ,['name']) %}
    {% for i in cat_list  %}

    <h5 class="dark-text title-underline">{{ i.name }}</h5>
    <br>
    <div class="row pt-50" id="gallery" data-toggle="modal" data-target="#exampleModal">
        {% set count = namespace(a=0)%}
        {% for d in doc  %}

        {% if d['category_name'] == i.name %}
        <div class="col-12 col-sm-6 col-lg-3 border-dark">
        {% set im = frappe.db.get_value("Gallery", d.category_name,"image") %}
            <img class="w-75" src="{{ image }}" data-target="#carouselExample"
                data-slide-to="{{ count.a }}" Title="{{ image }}" alt="{{ image }}">
        </div>
        {% endif %}

        {% set count.a = count.a + 1 %}
    {% endfor %}

    </div>
    {% endfor %}

    <div class="modal fade mt-5 pt-5" id="exampleModal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">

                <div class="modal-body mx-auto">
                    <div id="carouselExample" class="carousel slide" data-ride="carousel">
                        <div class="carousel-inner mx-auto">
                            {% set count = namespace(b=0)%}
                            {% for gall_img in gallery_list  %}

                            {% if count.b == 0 %}

                            <div class="carousel-item active justify-content-center">
                                <img class="d-inline-block" src="{{ gall_img.image }}" alt="{{ image }}">
                            </div>
                            {% else %}
                            <div class="carousel-item ">
                                <img class="d-inline-block" src="{{ gall_img.image }}" alt="{{ image }}">
                            </div>
                            {% endif %}

                            {% set count.b = count.b + 1 %}
                            {% endfor %}

                        </div>
                        <a class="carousel-control-prev" href="#carouselExample" role="button" data-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#carouselExample" role="button" data-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>


</section>
{% endblock %}
